function isMobile(){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}function highLightOwnedGames(e){if(e||(e=$("body")),user.isLoggedIn){let t=localStorage.getItem("gamedb-games");null!=t&&null!=(t=JSON.parse(t))&&e.find("[data-app-id]").each(function(){const e=$(this).attr("data-app-id");-1!==t.indexOf(parseInt(e))&&$(this).addClass("font-weight-bold")});let a=localStorage.getItem("gamedb-groups");null!=a&&null!=(a=JSON.parse(a))&&e.find("[data-group-id]").each(function(){const e=$(this).attr("data-group-id");-1!==a.indexOf(e)&&$(this).addClass("font-weight-bold")});let n=localStorage.getItem("gamedb-badges");null!=n&&null!=(n=JSON.parse(n))&&e.find("[data-badge-id]").each(function(){const e=$(this).attr("data-badge-id");-1!==n.indexOf(parseInt(e))&&$(this).addClass("font-weight-bold")})}}function isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function isJson(e){try{JSON.parse(e)}catch(e){return!1}return!0}function logLocal(){user.log&&console.log(...arguments)}function setUrlParam(e,t){const a=new URL(window.location);if(Array.isArray(t)){a.searchParams.delete(e);for(const n of t)a.searchParams.append(e,n)}else a.searchParams.set(e,t);a.searchParams.sort(),window.history.replaceState(null,null,a.pathname+a.search+a.hash)}function deleteUrlParam(e){const t=new URL(window.location);t.searchParams.delete(e),window.history.replaceState(null,null,t.pathname+t.search+t.hash)}function clearUrlParams(){window.history.replaceState(null,null,window.location.pathname+window.location.hash)}function ordinal(e){let t=e%10,a=e%100;return 1===t&&11!==a?e.toLocaleString()+"st":2===t&&12!==a?e.toLocaleString()+"nd":3===t&&13!==a?e.toLocaleString()+"rd":e.toLocaleString()+"th"}function pauseAllVideos(){$("video").each(function(e){$(this)[0].pause()})}function handleVideos(){$("#media video").on("click",function(e){const t=$(this)[0];t.paused?(pauseAllVideos(),t.play()):t.pause()})}function observeLazyImages(e){if(!e)return;"string"!=typeof e&&"object"!=typeof e||(e=$(e));let t=new IntersectionObserver(function(e,t){e.forEach(e=>{e.isIntersecting&&(loadImage($(e.target)),t.unobserve(e.target))})},{rootMargin:"0px 0px 50px 0px",threshold:0});e.each(function(e){t.observe(this)})}function observeLazyVideos(){let e=new IntersectionObserver(function(e,t){e.forEach(e=>{e.isIntersecting&&($(e.target).attr("preload","metadata"),t.unobserve(e.target))})},{rootMargin:"0px 0px 50px 0px",threshold:0});$("video").each(function(t){e.observe(this)})}function loadImage(e){const t=e.attr("data-lazy-alt");t&&e.attr("alt",t);const a=e.attr("data-lazy-title");a&&e.attr("title",a);const n=e.attr("data-lazy");n&&e.attr("src",n),e.removeAttr("data-lazy-alt"),e.removeAttr("data-lazy-title"),e.removeAttr("data-lazy")}function fixBrokenImages(){$("img").one("error",function(){const e=$(this).attr("data-src");this.src=e||"/assets/img/no-app-image-square.jpg"}),$('img[src=""][data-src]').each(function(e,t){this.src=$(this).attr("data-src")})}function _numbers(e,t){let a;const n=Math.floor(4.5);return t<=9?a=_range(0,t):e<=n?(a=_range(0,7)).push("ellipsis"):e>=t-1-n?((a=_range(t-7,t)).splice(0,0,"ellipsis"),a.splice(0,0,0)):((a=_range(e-n+2,e+n-1)).push("ellipsis"),a.splice(0,0,"ellipsis"),a.splice(0,0,0)),a.DT_el="span",a}function _range(e,t){const a=[];let n;n=t;for(let r=t=e;r<n;r++)a.push(r);return a}function toast(e=!0,t,a="",n=0,r=""){0===n&&(n=5);const s={onclick:r?function(){"refresh"===r&&location.reload()}:null,newestOnTop:!0,preventDuplicates:!1,progressBar:!0,timeOut:1e3*n,extendedTimeOut:1e3*n};isMobile()?s.positionClass="toast-bottom-right":s.positionClass="toast-top-right",e?toastr.success(t,a,s):toastr.error(t,a,s)}let _websocket;function websocketListener(e,t,a=1){if(void 0===window.WebSocket)return void(user.log&&log.console("Your browser does not support websockets"));if(_websocket&&_websocket.readyState===WebSocket.OPEN)return void logLocal("Websocket already open");_websocket=new WebSocket(("https:"===location.protocol?"wss://gamedb.online":"ws://"+location.host)+"/websocket/"+e);let n=$("#live-badge");_websocket.onopen=function(e){logLocal("websocket opened"),n.addClass("badge-success cursor-pointer"),n.removeClass("badge-secondary badge-danger"),a=1},_websocket.onclose=function(e){logLocal("Websocket closed",e),r(n,a,e,"onclose")},_websocket.onerror=function(e){logLocal("Websocket error",e),r(n,a,e,"onerror")},_websocket.onmessage=function(e){return logLocal("WS: "+e.data),t(e)},1===a&&n.on("click",function(a){$(this).hasClass("badge-danger")?(logLocal("Websocket opened manually"),websocketListener(e,t,2),n.addClass("badge-success"),n.removeClass("badge-secondary badge-danger")):$(this).hasClass("badge-success")&&(logLocal("Websocket closed manually",a),null!==_websocket&&_websocket.close(1e3),a.code=1e3,r(n,1,a,"manual"))});const r=function(a,n,r,s){logLocal(s,n),_websocket=null,a.addClass("badge-danger"),a.removeClass("badge-secondary badge-success"),"onclose"!==s&&"manual"!==s||1e3!==r.code&&setTimeout(function(){websocketListener(e,t,n+1)},5e3)}}!function(e){"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){function t(e,t,a){var n=a[e];return void 0===n?a[e]=[t]:n.push(t),a}var a={checked:["radio","checkbox"],selected:["option","select-one","select-multiple"],value:["button","color","date","datetime","datetime-local","email","hidden","month","number","password","range","reset","search","submit","tel","text","textarea","time","url","week"]};function n(t,n,r,s,o){var i=function(t){var n=function(e){return(e.type||e.nodeName).toLowerCase()}(t),r=void 0;return e.each(a,function(t,a){if(e.inArray(n,a)>-1)return r=t,!1}),r}(t);if("value"==i&&n==s)t.value=r,o.call(t,r);else if("checked"==i||"selected"==i){var l=[];t.options?e.each(t.options,function(e,t){l.push(t)}):l.push(t),t.multiple&&0==s&&(t.selectedIndex=-1),e.each(l,function(e,t){t.value==r&&(t[i]=!0,o.call(t,r))})}}var r={change:e.noop,complete:e.noop};e.fn.deserialize=function(a,s){e.isFunction(s)&&(s={complete:s}),s=e.extend(r,s||{}),a=function(a){var n={},r=/\+/g;return e.isPlainObject(a)?(e.extend(n,a),e.each(n,function(t,a){e.isArray(a)||(n[t]=[a])})):e.isArray(a)?e.each(a,function(e,a){t(a.name,a.value,n)}):"string"==typeof a&&e.each(a.split("&"),function(e,a){var s=a.split("=");t(decodeURIComponent(s[0].replace(r,"%20")),decodeURIComponent(s[1].replace(r,"%20")),n)}),n}(a);var o=function(a,n){var r={},s=a.map(function(){return this.elements?e.makeArray(this.elements):this}).filter(n||":input:not(:disabled)").get();return e.each(s,function(e,a){t(a.name,a,r)}),r}(this,s.filter);return e.each(a,function(t,a){e.each(o[t],function(t,r){e.each(a,function(e,a){n(r,t,a,e,s.change)})})}),s.complete.call(this),this}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.StickySidebar=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var a=t(function(e,t){!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t,a,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=(t=".stickySidebar",a={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},function(){function e(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,a){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.options=e.extend(a,r),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(e){n[e]=n[e].bind(n)}),this.initialize()}return n(e,[{key:"initialize",value:function(){var e=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var a=document.querySelectorAll(this.options.containerSelector);if((a=Array.prototype.slice.call(a)).forEach(function(t,a){t.contains(e.sidebar)&&(e.container=t)}),!a.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+t,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var t=this.dimensions;t.containerTop=e.offsetRelative(this.container).top,t.containerHeight=this.container.clientHeight,t.containerBottom=t.containerTop+t.containerHeight,t.sidebarHeight=this.sidebarInner.offsetHeight,t.sidebarWidth=this.sidebarInner.offsetWidth,t.viewportHeight=window.innerHeight,t.maxTranslateY=t.containerHeight-t.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var t=this.dimensions;t.sidebarLeft=e.offsetRelative(this.sidebar).left,t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,t.viewportBottom=t.viewportTop+t.viewportHeight,t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,t.topSpacing=this.options.topSpacing,t.bottomSpacing=this.options.bottomSpacing,"function"==typeof t.topSpacing&&(t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0),"function"==typeof t.bottomSpacing&&(t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?t.topSpacing<t.lastTopSpacing&&(t.translateY+=t.lastTopSpacing-t.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&t.bottomSpacing<t.lastBottomSpacing&&(t.translateY+=t.lastBottomSpacing-t.bottomSpacing,this._reStyle=!0),t.lastTopSpacing=t.topSpacing,t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){var e=this.dimensions,t="down"===this.scrollDirection?e.lastBottomSpacing:e.lastTopSpacing;return this.dimensions.sidebarHeight+t<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var e=this.dimensions,t=e.viewportTop+e.topSpacing,a=this.affixedType;return t<=e.containerTop||e.containerHeight<=e.sidebarHeight?(e.translateY=0,a="STATIC"):a="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),e.translateY=Math.max(0,e.translateY),e.translateY=Math.min(e.containerHeight,e.translateY),e.translateY=Math.round(e.translateY),e.lastViewportTop=e.viewportTop,a}},{key:"_getAffixTypeScrollingDown",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,a=e.viewportTop+e.topSpacing,n=e.viewportBottom-e.bottomSpacing,r=this.affixedType;return this.isSidebarFitsViewport()?e.sidebarHeight+a>=e.containerBottom?(e.translateY=e.containerBottom-t,r="CONTAINER-BOTTOM"):a>=e.containerTop&&(e.translateY=a-e.containerTop,r="VIEWPORT-TOP"):e.containerBottom<=n?(e.translateY=e.containerBottom-t,r="CONTAINER-BOTTOM"):t+e.translateY<=n?(e.translateY=n-t,r="VIEWPORT-BOTTOM"):e.containerTop+e.translateY<=a&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(r="VIEWPORT-UNBOTTOM"),r}},{key:"_getAffixTypeScrollingUp",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,a=e.viewportTop+e.topSpacing,n=e.viewportBottom-e.bottomSpacing,r=this.affixedType;return a<=e.translateY+e.containerTop?(e.translateY=a-e.containerTop,r="VIEWPORT-TOP"):e.containerBottom<=n?(e.translateY=e.containerBottom-t,r="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||e.containerTop<=a&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(r="VIEWPORT-UNBOTTOM"),r}},{key:"_getStyle",value:function(t){if(void 0!==t){var a={inner:{},outer:{}},n=this.dimensions;switch(t){case"VIEWPORT-TOP":a.inner={position:"fixed",top:n.topSpacing,left:n.sidebarLeft-n.viewportLeft,width:n.sidebarWidth};break;case"VIEWPORT-BOTTOM":a.inner={position:"fixed",top:"auto",left:n.sidebarLeft,bottom:n.bottomSpacing,width:n.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var r=this._getTranslate(0,n.translateY+"px");a.inner=r?{transform:r}:{position:"absolute",top:n.translateY,width:n.sidebarWidth}}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":a.outer={height:n.sidebarHeight,position:"relative"}}return a.outer=e.extend({height:"",position:""},a.outer),a.inner=e.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},a.inner),a}}},{key:"stickyPosition",value:function(a){if(!this._breakpoint){a=this._reStyle||a||!1,this.options.topSpacing,this.options.bottomSpacing;var n=this.getAffixType(),r=this._getStyle(n);if((this.affixedType!=n||a)&&n){var s="affix."+n.toLowerCase().replace("viewport-","")+t;for(var o in e.eventTrigger(this.sidebar,s),"STATIC"===n?e.removeClass(this.sidebar,this.options.stickyClass):e.addClass(this.sidebar,this.options.stickyClass),r.outer){var i="number"==typeof r.outer[o]?"px":"";this.sidebar.style[o]=r.outer[o]+i}for(var l in r.inner){var c="number"==typeof r.inner[l]?"px":"";this.sidebarInner.style[l]=r.inner[l]+c}var d="affixed."+n.toLowerCase().replace("viewport-","")+t;e.eventTrigger(this.sidebar,d)}else this._initialized&&(this.sidebarInner.style.left=r.inner.left);this.affixedType=n}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),e.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var e,t=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,e=a.type,requestAnimationFrame(function(){switch(e){case"scroll":t._calcDimensionsWithScroll(),t.observeScrollDir(),t.stickyPosition();break;case"resize":default:t._widthBreakpoint(),t.calcDimensions(),t.stickyPosition(!0)}t._running=!1}))}},{key:"_setSupportFeatures",value:function(){var t=this.support;t.transform=e.supportTransform(),t.transform3d=e.supportTransform(!0)}},{key:"_getTranslate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+e+", "+t+", "+a+")":!!this.support.translate&&"translate("+e+", "+t+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+t,this);var e={inner:{},outer:{}};for(var a in e.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},e.outer={height:"",position:""},e.outer)this.sidebar.style[a]=e.outer[a];for(var n in e.inner)this.sidebarInner.style[n]=e.inner[n];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(e){var t=!1,a=e?"perspective":"transform",n=a.charAt(0).toUpperCase()+a.slice(1),r=document.createElement("support").style;return(a+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach(function(e,a){if(void 0!==r[e])return t=e,!1}),t}},{key:"eventTrigger",value:function(e,t,a){try{var n=new CustomEvent(t,{detail:a})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,a)}e.dispatchEvent(n)}},{key:"extend",value:function(e,t){var a={};for(var n in e)void 0!==t[n]?a[n]=t[n]:a[n]=e[n];return a}},{key:"offsetRelative",value:function(e){var t={left:0,top:0};do{var a=e.offsetTop,n=e.offsetLeft;isNaN(a)||(t.top+=a),isNaN(n)||(t.left+=n),e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return t}},{key:"addClass",value:function(t,a){e.hasClass(t,a)||(t.classList?t.classList.add(a):t.className+=" "+a)}},{key:"removeClass",value:function(t,a){e.hasClass(t,a)&&(t.classList?t.classList.remove(a):t.className=t.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return a}}]),e}());e.default=r,window.StickySidebar=r}(t)});return e(a),e(t(function(e,t){!function(e){var t,n=(t=a)&&t.__esModule?t:{default:t};!function(){if("undefined"!=typeof window){var e=window.$||window.jQuery||window.Zepto,t="stickySidebar";if(e){e.fn.stickySidebar=function(a){return this.each(function(){var r=e(this),s=e(this).data(t);if(s||(s=new n.default(this,"object"==typeof a&&a),r.data(t,s)),"string"==typeof a){if(void 0===s[a]&&-1===["destroy","updateSticky"].indexOf(a))throw new Error('No method named "'+a+'"');s[a]()}})},e.fn.stickySidebar.Constructor=n.default;var a=e.fn.stickySidebar;e.fn.stickySidebar.noConflict=function(){return e.fn.stickySidebar=a,this}}}}()}()}))}),function(e,t){var a,n;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,a=e.Cookies,(n=e.Cookies=t()).noConflict=function(){return e.Cookies=a,n})}(this,function(){"use strict";function e(){for(var e={},t=0;t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}function t(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}return function a(n){function r(t,a,r){if("undefined"!=typeof document){"number"==typeof(r=e(s.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in r)r[i]&&(o+="; "+i,!0!==r[i]&&(o+="="+r[i].split(";")[0]));return document.cookie=t+"="+a+o}}var s={defaults:{path:"/"},set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},s=0;s<a.length;s++){var o=a[s].split("="),i=o.slice(1).join("=");'"'===i.charAt(0)&&(i=i.slice(1,-1));try{var l=t(o[0]);if(r[l]=(n.read||n)(i,l)||t(i),e===l)break}catch(e){}}return e?r[e]:r}},remove:function(t,a){r(t,"",e(a,{expires:-1}))},withConverter:a};return s}(function(){})}),$(fixBrokenImages),$(handleVideos),$(observeLazyImages("img[data-lazy]")),$(observeLazyVideos()),$.fn.dataTableExt.oPagination.gamedb=function(e,t){return["previous",_numbers(e,t),"next"]},function(e,t,a,n,r){"use strict";const s={cache:!0,searchFields:[],tableOptions:{autoWidth:!1,dom:'<"dt-header"<"dt-pagination"p><"dt-info"i>>t<"dt-footer"<"dt-pagination"p>>r',fixedHeader:!0,info:!0,processing:!1,language:{processing:'<i class="fas fa-spinner fa-spin fa-3x fa-fw"></i>',paginate:{next:'<i class="fas fa-chevron-right"></i>',previous:'<i class="fas fa-chevron-left"></i>'},info:"_TOTAL_ rows (_PAGES_ pages)",infoFiltered:" of _MAX_"},lengthChange:!1,ordering:!0,pageLength:100,paging:!0,pagingType:"gamedb",searching:!0,stateSave:!1,search:{smart:!0}}};function o(a,r){r=e.extend(!0,{},s,r),e(a).hasClass("table-counts")||(r.tableOptions.dom=r.tableOptions.dom.replace('<"dt-info"i>',"")),r.isAjax=function(){return null!=e(a).attr("data-path")};let o={},u={};if(r.isAjax()){const t=function(t,n,s){delete t.columns,t.search=u,e.ajax({data:t,dataType:"json",cache:r.cache,url:e(a).attr("data-path"),success:n,error:function(e,a,r){n(t={draw:"1",recordsTotal:"0",recordsFiltered:"0",data:[],limited:!1},a,null)}})};r=e.extend(!0,{},r,{tableOptions:{processing:!1,serverSide:!0,orderMulti:!1,ajax:t}})}else{const t=e(a).find("thead tr th[data-disabled]").map(function(){return e(this).index()}).get();r=e.extend(!0,{},r,{tableOptions:{columnDefs:[{orderable:!1,targets:t}]}});const n=e(a).attr("data-limit");n&&(r.tableOptions.pageLength=parseInt(n))}for(const e of r.searchFields){const t=c(e),a=i(e);t&&a&&a.length>0&&(o[t]=a,u[t]=a)}const p=new URL(t.location).searchParams;for(const e of r.searchFields){const t=c(e);if(t&&p.has(t)){let a;l(e,a=d(e)?p.getAll(t):p.get(t)),u[t]=a,e.attr("data-hightlight")&&(this.highlight=a);const n=e.attr("data-col-sort");n&&a&&(r.tableOptions.order=[[parseInt(n),"desc"]])}}this.options=r,this.element=a,this.user=n,this.initialValues=o,this.currentValues=u,this.urlParams=p,this.init()}function i(e){return e.hasClass("noUi-target")?e[0].noUiSlider.get():"radio"===e.attr("type")?e.filter(":checked").val():e.val()}function l(e,t){e.hasClass("noUi-target")?e[0].noUiSlider.set(t):"radio"===e.attr("type")?e.filter("[value"+t+"]").prop("checked",!0):(e.val(t),e.hasClass("form-control-chosen")&&e.trigger("chosen:updated"))}function c(e){return e.hasClass("noUi-target")?e.attr("data-name"):e.attr("name")}function d(e){return e.hasClass("noUi-target")?i(e).length>1:!!e.prop("multiple")}e.extend(o.prototype,{init:function(){const a=this;e(this.element).on("preXhr.dt",function(t,n,r){e(a.element).stop(!0,!0).fadeTo(200,.3)}),e(this.element).on("xhr.dt",function(t,n,r,s){e(a.element).stop(!0,!0).fadeTo(200,1),a.limited=r.limited});const n=e(this.element).DataTable(this.options.tableOptions);if(this.dt=n,this.initialValues.s=e.extend(!0,[],n.order()),e(this.element).on("draw.dt",function(t,r){if(a.limited){const t=e("li.paginate_button.page-item.next.disabled").length>0?"font-weight-bold":"",n=2===a.limited?e('<li class="donate"><small><a href="/login"><i class="fas fa-unlock"></i> <span class="'+t+'">Login for more!</span></a></small></li>'):e('<li class="donate"><small><a href="/donate"><i class="fas fa-heart text-danger"></i> <span class="'+t+'">Donate for more!</span></a></small></li>');e(a.element).parent().find(".dt-pagination ul.pagination").append(n)}const s=e(a.element).parent().find(".dt-header .dt-pagination"),o=e(a.element).parent().find(".dt-footer .dt-pagination");if(n.page.info().pages<=1?(o.hide(),e(a.element).hasClass("table-counts")||s.hide()):(o.show(),s.show()),e.fn.mark){const t=e(".markable");t.unmark(),a.highlight&&t.mark(a.highlight)}highLightOwnedGames(e(a.element)),observeLazyImages(e(a.element).find("img[data-lazy]")),fixBrokenImages()}),e('a[data-toggle="tab"]').on("shown.bs.tab",function(a){e.each(t.gdbTables,function(e,t){t.fixedHeader.adjust()}),clearUrlParams()}),this.options.isAjax())for(const e of this.options.searchFields)if(e.hasClass("noUi-target")){const r=e.attr("data-name"),s=e[0].noUiSlider;s.on("set",function(e){const o=s.get();r&&(a.currentValues[r]=o,setUrlParam(r,o)),"function"==typeof t.updateLabels&&t.updateLabels(),n.draw()}),s.on("update",function(e){"function"==typeof t.updateLabels&&t.updateLabels()})}else{const t=e.attr("name");e.on("change search",function(r){const s=e.attr("data-col-sort");let o;return s&&n.order([parseInt(s),"desc"]),o="radio"===e.attr("type")?e.filter(":checked").val():e.val(),e.attr("data-hightlight")&&(a.highlight=o),t&&(a.currentValues[t]=o,setUrlParam(t,o)),n.draw(),!1})}else for(const t of this.options.searchFields){const r=t.attr("name");t.on("keyup search",function(s){const o=t.attr("data-col-sort");let i;o&&n.order([parseInt(o),"desc"]),i="radio"===t.attr("type")?t.filter(":checked").val():t.val(),t.attr("data-hightlight")&&(a.highlight=i),r&&(a.currentValues[r]=i,setUrlParam(r,i)),n.search(e(this).val()),n.draw()})}e("div.dt-pagination").on("focus",".paginate_button > a",function(){e(this).trigger("blur")}),this.options.isAjax()||e(a.element).trigger("draw.dt"),t.gdbTables=t.gdbTables||[],t.gdbTables.push()}}),e.fn.gdbTable=function(e){return new o(this,e).dt},e("table.table.table-datatable").each(function(t){e(this).gdbTable()})}(jQuery,window,document,user);const $document=$(document),$body=$("body");let dataLinkDrag=!1,dataLinkX=0,dataLinkY=0;$document.on("mousedown","[data-link]",function(e){dataLinkX=e.screenX,dataLinkY=e.screenY,dataLinkDrag=!1}),$document.on("mousemove","[data-link]",function(e){!dataLinkDrag&&(Math.abs(dataLinkX-e.screenX)>5||Math.abs(dataLinkY-e.screenY)>5)&&(dataLinkDrag=!0)}),$(document).on("mouseup","[data-link]",function(e){e.stopPropagation();const t=$(this).attr("data-link"),a=$(this).attr("data-target");return!t||(!!dataLinkDrag||(3===e.which||(e.ctrlKey||e.shiftKey||e.metaKey||2===e.which||"_blank"===a?($(e.target).is("a")||window.open(t,"_blank"),!0):(window.location.href=t,!0))))}),$(document).on("mouseup","[data-link] a",function(e){return e.stopPropagation(),!0}),$(".stop-prop").on("click",function(e){e.stopPropagation()});const consoleText="\n _____                       ____________ \n|  __ \\                      |  _  \\ ___ \\\n| |  \\/ __ _ _ __ ___   ___  | | | | |_/ /\n| | __ / _` | '_ ` _ \\ / _ \\ | | | | ___ \\\n| |_\\ \\ (_| | | | | | |  __/ | |/ /| |_/ /\n \\____/\\__,_|_| |_| |_|\\___| |___/ \\____/ \n";console.log(consoleText),$(".navbar .dropdown").on("mouseenter",function(e){$(this).addClass("show").find(".dropdown-menu").addClass("show")}),$(".navbar .dropdown").on("mouseleave",function(e){$(this).removeClass("show").find(".dropdown-menu").removeClass("show")}),$(".navbar .dropdown").on("click",function(e){e.stopPropagation()}),$body.tooltip({selector:'[data-toggle="tooltip"]'}),$(".json").each(function(e,t){const a=$(this).text();if(isJson(a)){const e=JSON.parse(a);$(this).text(JSON.stringify(e,null,"  "))}}),function(e,t){"use strict";e(function(a){const n=t.location.hash;if(n){let t="";n.split(/[,\-]/).map(function(a){e('.nav-link[href="'+(t=""===t?a:t+"-"+a)+'"]').tab("show")})}e('a[data-toggle="tab"]').on("shown.bs.tab",function(t){const a=e(t.target).attr("href");history.pushState?history.pushState(null,null,a):location.hash=a})})}(jQuery,window);const $top=$("#top");if($(window).on("scroll",function(e){$(window).scrollTop()>=1e3?$top.addClass("show"):$top.removeClass("show")}),$top.on("click",function(e){$("html, body").animate({scrollTop:0},500)}),isIterable(user.toasts))for(const e of user.toasts)toast(e.success,e.message,e.title,e.timeout,e.link);$(function(e){const t=$("#app-page, #package-page, #player-page, #bundle-page, #group-page, #badge-page").attr("data-path");t&&t!==window.location.pathname&&history.replaceState(null,null,t+window.location.hash)});const $lockIcon='<i class="fa fa-lock text-muted" data-toggle="tooltip" data-placement="left" title="Private"></i>';function addDataTablesRow(e,t,a,n){let r=$('<tr class="fade-green" />');if(e.createdRow(r[0],t,null),isIterable(e.columnDefs))for(const a of e.columnDefs){let e=t[a];"render"in a&&(e=a.render(null,null,t));const n=$("<td />").html(e);"createdCell"in a&&a.createdCell(n,null,t,null,null),n.find("[data-livestamp]").html("a few seconds ago"),r.append(n)}n.prepend(r),n.find("tbody tr").slice(a).remove(),observeLazyImages(r.find("img[data-lazy]"))}!function(){const e=$.ajaxSettings.xhr;$.ajaxSetup({xhr:function(){const t=e();if(t){const e=$("#loading");t.addEventListener("loadstart",function(t){e.fadeTo(100,1)}),t.addEventListener("loadend",function(t){e.fadeTo(100,0)}),t.addEventListener("error",function(e){console.log("XHR Error",e)}),t.addEventListener("abort",function(e){console.log("XHR Aborted",e)})}return t}})}();const cookieName="gamedb-session-2";function setCookieFlag(e,t){let a=getSessionCookie();return a[e]=t,Cookies.set(cookieName,JSON.stringify(a),{expires:30,secure:user.isProd})}function getSessionCookie(e=null){let t=Cookies.get(cookieName),a={};return t&&(a=JSON.parse(t)),e?a[e]:a}$(".jumbotron button.close").on("click",function(e){$(this).closest(".jumbotron").slideUp(),setCookieFlag($(this).attr("data-id"),!0)});const $darkMode=$("#dark-mode");$darkMode.on("click",function(e){const t=$darkMode.find(".fa-sun"),a=$darkMode.find(".fa-moon");return t.hasClass("d-none")?(t.removeClass("d-none"),a.addClass("d-none"),$("body").removeClass("dark"),setCookieFlag("dark",!1)):(t.addClass("d-none"),a.removeClass("d-none"),$("body").addClass("dark"),setCookieFlag("dark",!0)),!1});let darkMode=getSessionCookie("dark");function getOS(){let e="windows";return-1!==navigator.appVersion.indexOf("Mac")&&(e="macos"),-1!==navigator.appVersion.indexOf("Linux")&&(e="linux"),e}void 0===darkMode&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&$darkMode.trigger("click");const $priceChart=$("#app-page #prices-chart, #package-page #prices-chart");if($priceChart.length>0&&prices){let e,t;function upateChart(a){t&&t.abort(),$("tr[data-code]").removeClass("font-weight-bold").attr("data-link",""),$("tr[data-code="+a+"]").addClass("font-weight-bold").removeAttr("data-link"),e.showLoading(),t=$.ajax({type:"GET",data:{code:a},url:$priceChart.attr("data-ajax"),dataType:"json",cache:!0,success:function(t,a,n){"prices"in t&&(e.series[0].setData(t.prices),e.yAxis[0].update({title:{text:"Price ("+t.symbol+")"}}),e.hideLoading())}})}function loadPriceChart(){e=Highcharts.chart("prices-chart",{chart:{zoomType:"x",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},xAxis:{title:{text:"Date"},type:"datetime",labels:{step:1,formatter:function(){return moment(this.value).format("Do MMM YY")}}},yAxis:{title:{text:"Price ($)"},type:"linear",min:0,allowDecimals:!0},legend:{enabled:!1},credits:{enabled:!1},series:[{type:"line",name:"Price",step:"left",color:"#28a745"}],annotations:[{labelOptions:{backgroundColor:"rgba(255,255,255,0.5)",verticalAlign:"top",y:15},labels:[{point:{xAxis:0,yAxis:0,x:27.98,y:255},text:"Arbois"},{point:{xAxis:0,yAxis:0,x:45.5,y:611},text:"Montrond"},{point:{xAxis:0,yAxis:0,x:63,y:651},text:"Mont-sur-Monnet"}]}]}),upateChart(user.prodCC)}$("#prices tr[data-code]").on("click",function(e){$(this).hasClass("font-weight-bold")||upateChart($(this).attr("data-code"))})}const $achievementsPage=$("#achievements-page");if($achievementsPage.length>0){const e={order:[[1,"asc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[7])},columnDefs:[{targets:0,render:function(e,t,a){let n=a[5]+": "+a[0]+"<br><small>"+a[2]+"</small>";return a[8]&&(n+='<span class="badge badge-danger float-right ml-1">Hidden</span>'),'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[1]+'" alt="" data-lazy-alt="'+a[0]+'"></div><div class="name markable">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[3]+"%"},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[6].toLocaleString()},orderable:!1,visible:!1}]},t=[$("#search")];$("table.table").gdbTable({tableOptions:e,searchFields:t})}if($("#admin-page").length>0){$("#actions tbody tr").on("click",function(){return confirm("Are you sure?")&&$.ajax({type:"get",url:$(this).attr("data-action"),error:function(e,t,a){toast(!0,a)}}),!1});const e=$("form#queues");e.on("submit",function(t){t.preventDefault(),$.ajax({type:"post",url:e.attr("action"),data:$(this).serialize(),success:function(t,a,n){toast(!0,"Queued"),e.trigger("reset")}})}),websocketListener("admin",function(e){const t=JSON.parse(e.data),a=t.Data.task_id,n=t.Data.action;if(a&&n){const e=$('tr[data-id="'+a+'"]');"started"===n?(e.addClass("table-warning"),e.removeClass("table-danger")):"finished"===n&&(e.removeClass("table-warning"),e.removeClass("table-danger"),e.find(".prev").livestamp(),e.find(".next").livestamp(new Date(1e3*t.Data.time)),toast(!0,a+" finished","",0))}})}const $appPage=$("#app-page");if($appPage.length>0){function loadNews(){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-id",t[0]),$(e).addClass("cursor-pointer")},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[10]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"<br /><small>"+a[2]+'</small></div></div><div class="d-none">'+a[5]+"</div>"},createdCell:function(e,t,a,n,r){$(e).attr("style","min-width: 300px;"),$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[4]+'" data-livestamp="'+a[3]+'"></span>'},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]},t=$("#news-table"),a=t.gdbTable({tableOptions:e});t.on("click","tr[role=row]",function(){const e=a.row($(this));e.child.isShown()?(e.child.hide(),$(this).removeClass("shown")):(e.child($("<div/>").html(e.data()[5]).text()).show(),$(this).addClass("shown"))}),$("#news a").each(function(){const e=$(this).attr("href");e&&!e.startsWith("http")&&$(this).attr("href","http://"+e)})}function loadItems(){const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-id",t[0]),$(e).addClass("cursor-pointer")},columnDefs:[{targets:0,render:function(e,t,a){return a[12]},createdCell:function(e,t,a,n,r){},orderable:!1},{targets:1,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[25]+'" alt="" data-lazy-alt="'+a[16]+'"></div><div class="name">'+a[16]+'<br><small title="'+a[4]+'">'+a[29]+"</small></div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return a[28]?'<a href="'+a[28]+'" data-src="/assets/img/no-app-image-square.jpg" target="_blank" rel="noopener" class="stop-prop"><i class="fas fa-link"></i></a>':""},orderable:!1}]},t=$("#items-table"),a=[$("#items-search")],n=t.gdbTable({tableOptions:e,searchFields:a});t.on("click","tr[role=row]",function(){const e=n.row($(this));if(e.child.isShown())e.child.hide(),$(this).removeClass("shown");else{const t=e.data(),a=[{Name:"App ID",Value:t[0]},{Name:"Bundle",Value:t[1]},{Name:"Commodity",Value:t[2]},{Name:"Date Created",Value:t[3]},{Name:"Description",Value:t[4]},{Name:"Display Type",Value:t[5]},{Name:"Drop Interval",Value:t[6]},{Name:"Drop Max Per Window",Value:t[7]},{Name:"Exchange",Value:t[8]},{Name:"Hash",Value:t[9]},{Name:"Icon URL",Value:t[10]},{Name:"Icon URL Large",Value:t[11]},{Name:"Item Def ID",Value:t[12]},{Name:"Item Quality",Value:t[13]},{Name:"Marketable",Value:t[14]},{Name:"Modified",Value:t[15]},{Name:"Name",Value:t[16]},{Name:"Price",Value:t[17]},{Name:"Promo",Value:t[18]},{Name:"Quantity",Value:t[19]},{Name:"Tags",Value:t[20]},{Name:"Timestamp",Value:t[21]},{Name:"Tradable",Value:t[22]},{Name:"Type",Value:t[23]},{Name:"Workshop ID",Value:t[24]}],n=json2html.transform(a,{"<>":"div",class:"detail-row",html:[{"<>":"strong",html:"${Name}: "},{"<>":"span",html:"${Value}"}]});e.child('<img src="'+t[26]+'" alt="" class="float-right" />'+n).show(),$(this).addClass("shown")}})}function loadAppReviewsChart(){$.ajax({type:"GET",url:"/games/"+$appPage.attr("data-id")+"/reviews.html",dataType:"html",success:function(e,t,a){null===e&&(e=""),$("#reviews-ajax").html(e)}});const e={chart:{type:"spline",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},plotOptions:{},xAxis:{title:{text:""},type:"datetime"}};$.ajax({type:"GET",url:"/games/"+$appPage.attr("data-id")+"/reviews.json",dataType:"json",success:function(t,a,n){null===t&&(t=[]),Highcharts.chart("reviews-chart",$.extend(!0,{},e,{yAxis:[{allowDecimals:!1,title:{text:""},min:0,max:100,endOnTick:!1,labels:{formatter:function(){return this.value+"%"}}},{allowDecimals:!1,title:{text:""},opposite:!0}],legend:{enabled:!0},tooltip:{formatter:function(){const e=moment(this.key).format("dddd DD MMM YYYY @ HH:mm");return"Score"===this.series.name?this.y.toLocaleString()+"% Review score on "+e:"Positive Reviews"===this.series.name?this.y.toLocaleString()+" Positive reviews on "+e:"Negative Reviews"===this.series.name?this.y.toLocaleString()+" Negative reviews on "+e:void 0}},series:[{type:"line",name:"Score",color:"#007bff",data:t.mean_reviews_score,yAxis:0,marker:{symbol:"circle"}},{type:"area",name:"Positive Reviews",color:"#28a745",data:t.mean_reviews_positive,yAxis:1,marker:{symbol:"circle"}},{type:"area",name:"Negative Reviews",color:"#e83e8c",data:t.mean_reviews_negative,yAxis:1,marker:{symbol:"circle"}}]}))}})}function loadAppPlayersChart(){const e=new Date;e.setDate(e.getDate()-7);const t={chart:{type:"spline",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!0},xAxis:{title:{text:""},type:"datetime"},yAxis:{allowDecimals:!1,title:{text:""},min:0,opposite:!1,labels:{formatter:function(){return this.value.toLocaleString()}},visible:!0},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{formatter:function(){switch(this.series.name){case"Players Online":return this.y.toLocaleString()+" players on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"Players Online (Average)":return this.y.toLocaleString()+" average players on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"Twitch Viewers":return this.y.toLocaleString()+" Twitch viewers on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"Youtube Views":return this.y.toLocaleString()+" Youtube views on "+moment(this.key).format("dddd DD MMM YYYY")}}}};$.ajax({type:"GET",url:"/games/"+$appPage.attr("data-id")+"/players.json",dataType:"json",success:function(a,n,r){if(null===a){const e=Date.now();a={max_player_count:[[e,0]],max_twitch_viewers:[[e,0]],max_youtube_views:[[e,0]]}}Highcharts.chart("players-chart",$.extend(!0,{},t,{xAxis:{min:e.getTime()},series:[{name:"Youtube Views",color:"#FF0000",data:a.max_youtube_views,connectNulls:!0,type:"line",step:"right",visible:!1},{name:"Twitch Viewers",color:"#6441A4",data:a.max_twitch_viewers,connectNulls:!0},{name:"Players Online (Average)",color:"#28a74544",data:a.max_moving_average,connectNulls:!0},{name:"Players Online",color:"#28a745",data:a.max_player_count,connectNulls:!0}]}))}}),$.ajax({type:"GET",url:"/games/"+$appPage.attr("data-id")+"/players2.json",dataType:"json",success:function(e,a,n){if(null===e){const t=Date.now();e={max_player_count:[[t,0]],max_twitch_viewers:[[t,0]],max_youtube_views:[[t,0]]}}Highcharts.chart("players-chart2",$.extend(!0,{},t,{series:[{name:"Youtube Views",color:"#FF0000",data:e.max_youtube_views,connectNulls:!0,type:"line",step:"right",visible:!1},{name:"Twitch Viewers",color:"#6441A4",data:e.max_twitch_viewers,connectNulls:!0},{name:"Players Online (Average)",color:"#28a74544",data:e.max_moving_average,connectNulls:!0},{name:"Players Online",color:"#28a745",data:e.max_player_count,connectNulls:!0}]}))}})}function loadAppPlayerTimes(){const e={order:[[3,"desc"]],createdRow:function(e,t,a){$(e).attr("data-id",t[0]),$(e).attr("data-link",t[6])},columnDefs:[{targets:0,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).addClass("font-weight-bold")},orderable:!1},{targets:1,render:function(e,t,a){return a[3]?'<img data-lazy="'+a[3]+'" alt="" data-lazy-alt="'+a[7]+'" class="wide" data-toggle="tooltip" data-placement="left" data-lazy-title="'+a[7]+'" class="rounded">':""},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[5]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:3,render:function(e,t,a){return a[2]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]};$("#top-players-table").gdbTable({tableOptions:e})}function loadAchievements(){const e={pageLength:100,order:[[1,"desc"]],createdRow:function(e,t,a){t[7]&&$(e).addClass("font-weight-bold")},columnDefs:[{targets:0,render:function(e,t,a){let n=a[0];return a[4]||(n+='<span class="badge badge-danger float-right ml-1">Inactive</span>'),a[5]&&(n+='<span class="badge badge-danger float-right ml-1">Hidden</span>'),a[6]&&(n+='<span class="badge badge-danger float-right ml-1">Deleted</span>'),n+="<br><small>"+a[1]+"</small>",'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[0]+'"></div><div class="name">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[3]+"%"},orderSequence:["desc","asc"]}]};$("#achievements-table").gdbTable({tableOptions:e})}function loadDLC(){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[5])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderSequence:["asc","desc"]},{targets:1,render:function(e,t,a){return a[3]?'<span data-toggle="tooltip" data-placement="left" title="'+a[4]+'" data-livestamp="'+a[3]+'"></span>':a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]}]},t=[$("#dlc-search")];$("#dlc-table").gdbTable({tableOptions:e,searchFields:t})}function loadDevLocalization(){$.ajax({type:"GET",url:"/games/"+$appPage.attr("data-id")+"/localization.html",dataType:"html",success:function(e,t,a){null===e&&(e=""),$("#dev-localization").html(e)}})}$("#details video").on("click",function(e){const t=$(this)[0];t.paused?t.play():($('a.nav-link[href="#media"]').tab("show"),$("#scroll-to-videos").trigger("click"))}),$(".followers-link").on("click",function(e){$('a.nav-link[href="#players"]').tab("show");const t=$("#followers").offset().top;return $("html, body").animate({scrollTop:t-15},500),!1}),$("#scroll-to-videos").on("click",function(e){const t=$("#videos").offset().top;$("html, body").animate({scrollTop:t-15},500)}),$("#dev-info").on("click","tr",function(){const e=$(this),t=$(this).closest("table").DataTable().row(e);t.child.isShown()?(t.child.hide(),e.removeClass("shown")):(t.child(function(){return'<code class="wbba">'+e.data("raw")+"</code>"}).show(),e.addClass("shown"))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){const t=$(e.target),a=$(e.relatedTarget);if(!t.attr("loaded"))switch(t.attr("loaded",1),t.attr("href")){case"#news":loadNews();break;case"#items":loadItems();break;case"#prices":loadPriceChart();break;case"#players":loadAppPlayersChart(),loadAppPlayerTimes(),loadGroupChart($appPage);break;case"#reviews":loadAppReviewsChart();break;case"#achievements":loadAchievements();break;case"#dlc":loadDLC();break;case"#dev-localization":loadDevLocalization()}"#media"===a.attr("href")&&pauseAllVideos()}),websocketListener("app",function(e){JSON.parse(e.data).Data.toString()===$appPage.attr("data-id")&&toast(!0,"Click to refresh","This app has been updated",0,"refresh")})}const $apiPage=$("#api-page");$apiPage.length>0&&($("#sidebar").stickySidebar({topSpacing:0,bottomSpacing:16}),$(".endpoint").on("mouseenter",function(){$(this).trigger("select")}),$("button[type=submit]").on("click",function(e){const t=$(this).closest("form");t.find("input[data-name]").each(function(e){$(this).attr("name",$(this).attr("data-name"))}),t.find("input:not([type=submit]):not(.endpoint)").each(function(e){!$(this).val()&&$(this).prop("required")?$(this).addClass("is-invalid"):$(this).removeClass("is-invalid")}),t.find("input.form-control:not(.endpoint)").each(function(e){""===$(this).val()&&$(this).attr("name","")});let a=t.find(".endpoint").attr("value");a=unescape(a);for(const e of a.matchAll(/\{([a-z]+)\}/g)){const n=t.find('input[data-name="'+e[1]+'"][data-location=path]');n.length&&n.val()&&(a=a.replace(e[0],n.val()),n.removeAttr("name"))}t.attr("action",a)})),$("#apps-page").length>0&&function(e,t){"use strict";e("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:10});const a=e("#price-slider"),n=noUiSlider.create(a[0],{start:[0,100],connect:!0,step:1,range:{min:0,max:100}}),r=e("#score-slider"),s=noUiSlider.create(r[0],{start:[0,100],connect:!0,step:1,range:{min:0,max:100}});function o(t){const a=n.get();a[0]===a[1]?e("label#price-label").html("Price ("+user.userCurrencySymbol+Math.round(a[0])+")"):e("label#price-label").html("Price ("+user.userCurrencySymbol+Math.round(a[0])+" - "+user.userCurrencySymbol+Math.round(a[1])+")");const r=s.get();r[0]===r[1]?e("label#score-label").html("Score ("+Math.round(r[0])+"%)"):e("label#score-label").html("Score ("+Math.round(r[0])+"% - "+Math.round(r[1])+"%)")}window.updateLabels=o,e(o);const i={order:[[2,"desc"]],createdRow:function(t,a,n){e(t).attr("data-app-id",a[0]),e(t).attr("data-link",a[3])},columnDefs:[{targets:0,render:function(e,t,a){return a[9].toLocaleString()},orderable:!1},{targets:1,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(t,a,n,r,s){e(t).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return a[7].toLocaleString()},orderSequence:["desc"]},{targets:3,render:function(e,t,a){return a[10].toLocaleString()},orderSequence:["desc"]},{targets:4,render:function(e,t,a){return a[5]+"%"},orderSequence:["desc"]},{targets:5,render:function(e,t,a){return a[6]},orderSequence:["desc"]},{targets:6,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},l=(new URL(window.location).searchParams,e("#platforms")),c=[e("#tags"),e("#genres"),e("#categories"),e("#developers"),e("#publishers"),e("#types"),e("#search"),l,a,r];e("table.table").gdbTable({tableOptions:i,searchFields:c})}(jQuery,document);const $appsAchievementsPage=$("#apps-achievements-page");if($appsAchievementsPage.length>0){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img alt="" data-lazy="'+a[2]+'" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[5].toLocaleString()},orderSequence:["desc"]},{targets:2,render:function(e,t,a){return a[6].toLocaleString()+"%"},orderSequence:["desc"]},{targets:3,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:4,render:function(e,t,a){return isIterable(a[7])?json2html.transform(a[7],{"<>":"img",src:"","data-lazy":"${icon}","data-lazy-alt":"${name}",class:"mr-1","data-toggle":"tooltip","data-placement":"top","data-lazy-title":"${name}"}):""},createdCell:function(e,t,a,n,r){$(e).addClass("img"),$(e).attr("nowrap","nowrap")},orderable:!1}]},t=[$("#search")];$("table.table").gdbTable({tableOptions:e,searchFields:t})}const $trendingAppsPage=$("#trending-apps-page"),$trendingAppsTable=$("table.table");if($trendingAppsPage.length>0){const e={order:[[3,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img alt="" data-lazy="'+a[2]+'" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:2,render:function(e,t,a){return a[6].toLocaleString()},orderSequence:["desc"]},{targets:3,render:function(e,t,a){return a[5].toLocaleString()},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return'<div data-app-id="'+a[0]+'"><i class="fas fa-spinner fa-spin"></i></div>'},createdCell:function(e,t,a,n,r){$(e).addClass("chart")},orderable:!1}]};$trendingAppsTable.gdbTable({tableOptions:e})}if($trendingAppsPage.length>0||$("#new-releases-page").length>0){function loadCharts(){const e=$("td.chart div[data-app-id]").map(function(){return $(this).attr("data-app-id")}).get().join(",");$.ajax({type:"GET",url:"/games/trending/charts.json?ids="+e,dataType:"json",success:function(e,t,a){null!==e&&$("div[data-app-id]").each(function(t){let a={};const n=$(this).attr("data-app-id");a=null!==e&&n in e&&"max_player_count"in e[n]?e[n].max_player_count:[],Highcharts.chart(this,{chart:{type:"area",margin:[0,0,0,0],skipClone:!0,height:32,backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!1},xAxis:{title:{text:null},labels:{enabled:!1},type:"datetime"},yAxis:{title:{text:null},labels:{enabled:!1},min:0},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{hideDelay:0,outside:!0,shared:!0,formatter:function(){return this.y.toLocaleString()+" players on "+moment(this.x).format("dddd DD MMM YYYY @ HH:mm")},style:{width:"500px"}},series:[{color:"#28a745",data:a}]})})}})}$trendingAppsTable.on("draw.dt",function(e,t,a){loadCharts()})}$("#apps-random-page").length>0&&($("#find-another").on("click",function(e){window.location.reload(!0)}),$("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:1}),$("#search-card select").on("change",function(e){const t=new URLSearchParams(location.search);$(this).val()?t.set($(this).attr("name"),$(this).val()):t.delete($(this).attr("name")),window.location.href=window.location.pathname+"?"+t.toString()}),$(function(){const e=$("#search-card select");window.location.search&&e.deserialize(window.location.search.replace("?","")),e.trigger("chosen:updated")}));const $badgePage=$("#badge-page");if($badgePage.length>0){const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[5])},columnDefs:[{targets:0,render:function(e,t,a){return a[0]}},{targets:1,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")}},{targets:2,render:function(e,t,a){return a[3].toLocaleString()}},{targets:3,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")}},{targets:4,render:function(e,t,a){return a[6]?'<a href="'+a[6]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};$("table.table").gdbTable({tableOptions:e})}const $bundlePage=$("#bundle-page");if($bundlePage.length>0&&$.ajax({type:"GET",url:"/bundles/"+$bundlePage.attr("data-id")+"/prices.json",dataType:"json",success:function(e,t,a){null===e&&(e=[]),Highcharts.chart("prices-chart",{chart:{zoomType:"x",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},tooltip:{formatter:function(){return this.y.toLocaleString()+"% discount on "+moment(this.x).format("dddd DD MMM YYYY @ HH:mm")}},xAxis:{title:{text:"Date"},type:"datetime",labels:{step:1,formatter:function(){return moment(this.value).format("Do MMM YY")}}},yAxis:{title:{text:"Discount (%)"},type:"linear",max:0,min:-100,allowDecimals:!1,reversed:!0},legend:{enabled:!1},credits:{enabled:!1},series:[{type:"line",name:"Price",step:"left",color:"#28a745",data:e}]})}}),$("#bundles-page").length>0){const e={order:[[4,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[2])},columnDefs:[{targets:0,render:function(e,t,a){let n=a[1];return a[7]&&(n+=' <span class="badge badge-success">Lowest</span>'),'<div class="icon-name"><div class="icon"><img src="/assets/img/no-app-image-square.jpg" alt="'+a[1]+'"></div><div class="name">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[4]+"%"},orderSequence:["asc"]},{targets:2,render:function(e,t,a){return a[5].toLocaleString()},orderSequence:["desc"]},{targets:3,render:function(e,t,a){return a[6].toLocaleString()},orderSequence:["desc"]},{targets:4,createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},render:function(e,t,a){return'<span data-livestamp="'+a[3]+'"></span>'}},{targets:5,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},t=$("table.table"),a=t.gdbTable({tableOptions:e});websocketListener("bundles",function(n){const r=a.page.info();if(0===r.page){const a=JSON.parse(n.data);addDataTablesRow(e,a.Data,r.length,t)}})}if($("#changes-page").length>0){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[5])},columnDefs:[{targets:0,render:function(e,t,a){return a[6]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:1,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[2]+'" data-livestamp="'+a[1]+'"></span>'},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:2,render:function(e,t,a){let n=[];if(null!==a[3])for(let e in a[3])a[3].hasOwnProperty(e)&&(""===a[3][e].name&&(a[3][e].name="Unknown App"),n.push('<a href="'+a[3][e].path+'">'+a[3][e].name+"</a>"));return n.join("<br/>")},orderable:!1},{targets:3,render:function(e,t,a){let n=[];if(null!==a[4])for(let e in a[4])a[4].hasOwnProperty(e)&&(""===a[4][e].name&&(a[4][e].name="Unknown Package"),n.push('<a href="'+a[4][e].path+'">'+a[4][e].name+"</a>"));return n.join("<br/>")},orderable:!1}]},t=$("table.table"),a=t.gdbTable({tableOptions:e});websocketListener("changes",function(n){const r=a.page.info();if(0===r.page){const a=JSON.parse(n.data);if(isIterable(a.Data)){a.Data.sort(function(e,t){return Math.sign(e[0]-t[0])});for(const n of a.Data)addDataTablesRow(e,n,r.length,t)}}})}if($("#chat-page").length>0){const e=$("[data-channel-id]").attr("data-channel-id");function chatRow(e,t=!0){const a=$("ul[data-channel-id="+e.channel+"]"),n=t?" fade-green":"";!e.content&&e.embeds&&(e.content="<small>Media content not available on gamedb.online, please view in Discord</small>"),a.json2html(e,{"<>":"li",class:"media fade-in",style:"animation-delay: ${i}s",html:[{"<>":"img",class:"mr-3 rounded",alt:"","data-lazy-alt":"${author_user}","data-lazy":function(e,t){return e.author_avatar?"https://cdn.discordapp.com/avatars/"+e.author_id+"/"+e.author_avatar+".png?size=64":"/assets/img/no-app-image-square.jpg"}},{"<>":"div",class:"media-body",html:[{"<>":"h5",class:"mt-0 mb-1 rounded"+n,html:"${content}"},{"<>":"p",class:"text-muted",html:"By ${author_user}"}]}]},{prepend:t}),a.find("li").slice(50).remove(),observeLazyImages(a.find("img[data-lazy]"))}$.ajax({url:"/chat/"+e+"/chat.json",dataType:"json",cache:!1,success:function(e,t,a){if($(".fa-spin").remove(),isIterable(e))for(const t of e)chatRow(t,!1)}}),websocketListener("chat",function(e){chatRow(JSON.parse(e.data).Data)})}if($("#chat-bot-page").length>0){const e=$("table#recent tbody");function messageRow(t,a=!0){e.json2html(t,{"<>":"tr",html:[{"<>":"td",class:"img nowrap thin","":"",html:[{"<>":"div",class:"icon-name",html:[{"<>":"div",class:"icon",html:[{"<>":"img","data-lazy":"https://cdn.discordapp.com/avatars/${author_id}/${author_avatar}.png?size=64",alt:"","data-lazy-alt":"${author_name}"}]},{"<>":"div",class:"name",html:"${author_name}"}]}]},{"<>":"td",html:"${message}"}]},{prepend:a}),e.find("row").slice(2).remove(),observeLazyImages(e.find("img[data-lazy]")),fixBrokenImages()}$.ajax({url:"/discord-bot/commands.json",dataType:"json",cache:!1,success:function(e,t,a){if(isIterable(e))for(const t of e)messageRow(t,!1)}}),websocketListener("chat-bot",function(e){const t=JSON.parse(e.data);toast(!0,t.Data,"",2),messageRow(t.Data)})}if($("#contact-page").length,$("#commits-page").length>0){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[3]),$(e).attr("data-target","_blank"),t[4]&&$(e).addClass("table-success")},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="name">'+a[0]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).attr("id",a[5]),$(e).attr("nowrap","nowrap")},orderable:!1},{targets:1,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[6]+'" data-livestamp="'+a[1]+'"></span>'},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:2,render:function(e,t,a){return a[5]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:3,render:function(e,n,r){return null===t&&(t=a.DataTable().page.info().page),r[2]||t>0?'<i class="fas fa-check"></i>':'<i class="fas fa-times"></i>'},orderable:!1}]};let t=null;const a=$("table.table");a.gdbTable({tableOptions:e}).on("draw.dt",function(e,a){t=null})}$("#coop-page").length>0&&($("form#add").on("submit",function(e){e.preventDefault();let t="";const a=$("input#id").val();t=window.location.href.indexOf("?")>=0?window.location.href+"&p="+a:window.location.href+"?p="+a,window.location=t}),$("#addme input").on("click",function(e){const t=$(this).attr("data-id");$("input#id").val(t),$("form#add").trigger("submit")}));const $xpPage=$("#experience-page");if($xpPage.length>0){function scroll(){if("string"==typeof scrollTo){const e=$(scrollTo).offset().top-100;$("html, body").animate({scrollTop:e},500),$("tr").removeClass("table-success"),$(scrollTo).addClass("table-success")}}function levelToXP(e){let t=0;for(let a=0;a<=e;a++)t+=100*Math.ceil(a/10);return t}function update(){const e=$("#answer");e.val("Loading..");let t=$("#from").val();t<1&&(t=1);let a=$("#to").val();a<1&&(a=1),e.val((levelToXP(a)-levelToXP(t)).toLocaleString())}$xpPage.on("click","tr[data-level]",function(e){const t=$(this).attr("data-level");history.pushState&&history.pushState("data","","/experience/"+t),scrollTo="tr[data-level="+t+"]",scroll()}),$("#from, #to").on("change",update),$("#calculate").on("click",function(e){e.preventDefault(),update()}),$(function(e){scroll(),update()})}const $groupPage=$("#group-page");function loadGroupPlayers(){$.ajax({type:"GET",url:"/groups/"+$groupPage.attr("data-group-id")+"/table.json",dataType:"json",success:function(e,t,a){const n={pageLength:50,order:[[0,"asc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[8]),$(e).attr("data-player-id",t[0])},columnDefs:[{targets:0,render:function(e,t,a){if(a[6]){const e='<img data-lazy="'+a[4]+'" alt="" data-lazy-alt="'+a[6]+'" class="wide" data-toggle="tooltip" data-placement="left" data-lazy-title="'+a[6]+'">';return'<a href="/players?country='+a[6]+'">'+e+"</a>"}return""},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[3]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><div class="'+a[7]+'"></div></div><div class="name min nowrap">'+a[5].toLocaleString()+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:3,render:function(e,t,a){return a[2]?'<a href="'+a[2]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},r=[$("#items-search")];$("#players").gdbTable({tableOptions:n,searchFields:r})}})}function loadGroupChart(e=null){0!==$("#group-chart").length&&(e=e||$groupPage,$.ajax({type:"GET",url:"/groups/"+e.attr("data-group-id")+"/members.json",dataType:"json",success:function(e,t,a){null===e&&(e=[]),Highcharts.chart("group-chart",{chart:{type:"spline",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!0},xAxis:{title:{text:""},type:"datetime"},yAxis:{allowDecimals:!1,title:{text:""},labels:{formatter:function(){return this.value.toLocaleString()}}},tooltip:{formatter:function(){switch(this.series.name){case"In Chat":return this.y.toLocaleString()+" members in chat on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"In Game":return this.y.toLocaleString()+" members in game on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"Online":return this.y.toLocaleString()+" members online "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm");case"Members":return this.y.toLocaleString()+" members on "+moment(this.key).format("dddd DD MMM YYYY @ HH:mm")}}},series:[{name:"In Chat",color:"#007bff",data:e.max_members_in_chat,marker:{symbol:"circle"},visible:!1},{name:"In Game",color:"#e83e8c",data:e.max_members_in_game,marker:{symbol:"circle"},visible:!1},{name:"Members",color:"#28a745",data:e.max_members_count,marker:{symbol:"circle"}}]})}}))}if($groupPage.length>0&&(websocketListener("group",function(e){JSON.parse(e.data).Data.toString()===$groupPage.attr("data-id")&&toast(!0,"Click to refresh","This group has been updated",0,"refresh")}),loadGroupChart(),loadGroupPlayers()),$("#groups-page").length>0){$("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:1});const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-group-id",t[0]),$(e).attr("data-link",t[10])},columnDefs:[{targets:0,render:function(e,t,a){return a[9].toLocaleString()},orderable:!1},{targets:1,render:function(e,t,a){let n=a[1]+"<br><small>"+a[4]+"</small>";return a[8]&&(n+='<span class="badge badge-danger float-right">Removed</span>'),'<div class="icon-name"><div class="icon"><img class="tall" data-src="/assets/img/no-app-image-square.jpg" data-lazy="'+a[5]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name markable">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return a[6].toLocaleString()},orderSequence:["desc"]},{targets:3,render:function(e,t,a){return a[7]},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return""},orderable:!1,visible:!1},{targets:5,render:function(e,t,a){return a[2]?'<a href="'+a[2]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};$("table.table").gdbTable({tableOptions:e,searchFields:[$("#search"),$("#filter")]})}$("#info-page").length>0&&$("#questions "+window.location.hash).addClass("highlight");const $homePage=$("#home-page");if($homePage.length>0){$homePage.on("click","#sales span[data-sort]:not(.badge-success)",function(e){loadSales($(this).attr("data-sort"))}),$homePage.on("click","#players span[data-sort]:not(.badge-success)",function(e){loadPlayers($(this).attr("data-sort"))});let e=0;const t=$("#panels .card");function loadSales(e){$.ajax({url:"/home/sales/"+e+".json",dataType:"json",cache:!0,success:function(t,a,n){const r=$("#sales span[data-sort]");r.removeClass("badge-success"),r.addClass("cursor-pointer");const s=$('#sales span[data-sort="'+e+'"]');if(s.addClass("badge-success"),s.removeClass("cursor-pointer"),$("#sales tbody tr").remove(),$("#sales .change").html(e),isIterable(t)){const e=$("#sales tbody");e.json2html(t,{"<>":"tr","data-app-id":"${id}","data-link":"${link}",html:[{"<>":"td",class:"img",html:[{"<>":"div",class:"icon-name",html:[{"<>":"div",class:"icon",html:[{"<>":"img","data-lazy":"${icon}",alt:"","data-lazy-alt":"${name}"}]},{"<>":"div",class:"name",html:"${name}"}]}]},{"<>":"td",html:"${price}",class:"nowrap"},{"<>":"td",html:"${rating}"},{"<>":"td",nowrap:"nowrap",class:"nowrap",html:[{"<>":"span","data-toggle":"tooltip","data-placement":"left","data-livestamp":"${ends}"}]},{"<>":"td",html:[{"<>":"a",href:"${store_link}",target:"_blank",rel:"noopener",html:[{"<>":"i",class:"fas fa-link"}]}]}]},{prepend:!1}),observeLazyImages(e.find("img[data-lazy]")),highLightOwnedGames($("#sales"))}}})}function loadPlayers(e){$.ajax({url:"/home/players/"+e+".json",dataType:"json",cache:!0,success:function(t,a,n){const r=$("#players span[data-sort]");r.removeClass("badge-success"),r.addClass("cursor-pointer");const s=$('#players span[data-sort="'+e+'"]');if(s.addClass("badge-success"),s.removeClass("cursor-pointer"),$("#players tbody tr").remove(),isIterable(t)){const a=$("#players tbody"),n=[{"<>":"td",class:"font-weight-bold",html:"${rank}"},{"<>":"td",class:"img",html:[{"<>":"div",class:"icon-name",html:[{"<>":"div",class:"icon",html:[{"<>":"img","data-lazy":"${avatar}",alt:"","data-lazy-alt":"${name}"}]},{"<>":"div",class:"name",html:"${name}"}]}]}],r=$("#players .change1"),s=$("#players .change2");switch(e){case"level":n.push({"<>":"td",class:"img",html:'<div class="icon-name"><div class="icon"><div class="${class}"></div></div><div class="name min nowrap">${level}</div></div>'}),n.push({"<>":"td",nowrap:"nowrap",html:"${badges}"}),r.html("Level"),s.html("Badges");break;case"games":n.push({"<>":"td",nowrap:"nowrap",html:"${games}"}),n.push({"<>":"td",nowrap:"nowrap",html:"${playtime}"}),r.html("Games"),s.html("Playtime");break;case"bans":n.push({"<>":"td",nowrap:"nowrap",html:"${game_bans}"}),n.push({"<>":"td",nowrap:"nowrap",html:"${vac_bans}"}),r.html("Game Bans"),s.html("VAC Bans");break;case"profile":n.push({"<>":"td",nowrap:"nowrap",html:"${friends}"}),n.push({"<>":"td",nowrap:"nowrap",html:"${comments}"}),r.html("Friends"),s.html("Comments")}a.json2html(t,{"<>":"tr","data-link":"${link}",html:n},{prepend:!1}),observeLazyImages(a.find("img[data-lazy]"))}}})}t.each(function(){$(this).height()>e&&(e=$(this).height())}),t.css("min-height",e+"px"),loadSales("top-rated"),loadPlayers("level")}if($("#login-page").length,$("#new-releases-page").length>0){const e={order:[[3,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[5]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[7]+"%"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:3,render:function(e,t,a){return a[8].toLocaleString()},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return a[6]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:5,render:function(e,t,a){return'<div data-app-id="'+a[0]+'"><i class="fas fa-spinner fa-spin"></i></div>'},createdCell:function(e,t,a,n,r){$(e).addClass("chart")},orderSequence:["desc","asc"]}]},t=[$("#search")];$("table.table").gdbTable({tableOptions:e,searchFields:t})}if($("#news-page").length>0){function loadNewsAjax(){const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[6])},columnDefs:[{targets:0,render:function(e,t,a){return""===a[8]?a[8]="/assets/img/no-app-image-square.jpg":a[8].startsWith("/")||a[8].startsWith("http")||(a[8]="https://steamcdn-a.akamaihd.net/steamcommunity/public/images/apps/"+a[6]+"/"+a[8]+".jpg"),'<div class="icon-name"><div class="icon"><img src="'+a[8]+'" alt="'+a[7]+'"></div><div class="name">'+a[7]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img"),$(e).attr("data-link",a[9])},orderable:!1},{targets:1,render:function(e,t,a){return"<span>"+a[1]+'</span><div class="d-none">'+a[5]+"</div>"},createdCell:function(e,t,a,n,r){$(e).addClass("article-title")},orderable:!1},{targets:2,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[4]+'" data-livestamp="'+a[3]+'"></span>'},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]},t=$("#news-table"),a=t.gdbTable({tableOptions:e});t.on("click","tr[role=row] td.article-title",function(){const e=$(this).closest("tr"),t=a.row(e);t.child.isShown()?(t.child.hide(),e.removeClass("shown")):(t.child($("<div/>").html(t.data()[5]).text()).show(),e.addClass("shown"))})}$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){const t=$(e.target);$(e.relatedTarget);if(!t.attr("loaded"))switch(t.attr("loaded",1),t.attr("href")){case"#apps":loadNewsAjax()}}),$(".minned").on("click",function(e){$(this).toggleClass("minned")})}const $packagePage=$("#package-page");if($packagePage.length>0&&($('a[data-toggle="tab"]').on("shown.bs.tab",function(e){const t=$(e.target);$(e.relatedTarget);if(!t.attr("loaded"))switch(t.attr("loaded",1),t.attr("href")){case"#prices":loadPriceChart()}}),websocketListener("package",function(e){JSON.parse(e.data).Data.toString()===$packagePage.attr("data-id")&&toast(!0,"Click to refresh","This package has been updated",0,"refresh")})),$("#packages-page").length>0){$("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:10});const e={order:[[5,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[1])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[8]+'" data-lazy-alt="'+a[2]+'"></div><div class="name">'+a[2]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[5]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[9]},orderSequence:["desc","asc"]},{targets:3,render:function(e,t,a){return a[4].toLocaleString()},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return a[11]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:5,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[7]+'" data-livestamp="'+a[6]+'">'+a[7]+"</span>"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc"]},{targets:6,render:function(e,t,a){return a[10]?'<a href="'+a[10]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},t=[$("#status"),$("#platform"),$("#license"),$("#billing")],a=$("table.table"),n=a.gdbTable({tableOptions:e,searchFields:t});websocketListener("packages",function(t){const r=n.page.info();if(0===r.page){const n=JSON.parse(t.data);addDataTablesRow(e,n.Data,r.length,a)}})}const $playerPage=$("#player-page");if($playerPage.length>0){function loadPlayerGames(){const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[7])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")}},{targets:1,render:function(e,t,a){return a[5]},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:3,render:function(e,t,a){return a[6]},orderSequence:["desc","asc"]}]};$("#games #all-games").gdbTable({tableOptions:e,searchFields:[$("#player-games-search")]});const t={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[5])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[1]+'" alt="" data-lazy-alt="'+a[2]+'"></div><div class="name">'+a[2]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")}},{targets:1,render:function(e,t,a){return a[3].toLocaleString()}},{targets:2,render:function(e,t,a){return a[4].toLocaleString()},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")}}]};$("#games #recent-games").gdbTable({tableOptions:t})}function loadPlayerFriends(){const e={order:[[1,"desc"],[4,"asc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[1])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" data-src="/assets/img/no-player-image.jpg" alt="" data-lazy-alt="'+a[3]+'"></div><div class="name">'+a[3]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return""!==a[4]&&"-"!==a[4]||$("#add-missing-friends").removeClass("d-none"),a[4].toLocaleString()},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[5]?0===a[6]?$lockIcon:a[6].toLocaleString():"-"},orderSequence:["desc","asc"]},{targets:3,render:function(e,t,a){return a[7]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["asc","desc"]},{targets:4,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};$("#friends table.table").gdbTable({tableOptions:e})}function loadPlayerGroups(){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[3]),$(e).attr("data-group-id",t[0])},columnDefs:[{targets:0,render:function(e,t,a){let n="";return a[7]&&(n='<span class="badge badge-success float-right">Primary</span>'),'<div class="icon-name"><div class="icon"><img data-lazy="'+a[4]+'" data-src="/assets/img/no-player-image.jpg" alt="" data-lazy-alt="'+a[2]+'"></div><div class="name">'+a[2]+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderSequence:["asc"]},{targets:1,render:function(e,t,a){return a[5].toLocaleString()},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[6]},orderable:!1},{targets:3,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};$("#groups-table").gdbTable({tableOptions:e})}function loadPlayerWishlist(){const e={order:[[0,"asc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[2])},columnDefs:[{targets:0,render:function(e,t,a){return 0===a[4]?"-":ordinal(a[4])},createdCell:function(e,t,a,n,r){$(e).addClass("font-weight-bold")},orderSequence:["asc"]},{targets:1,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[3]+'" data-src="/assets/img/no-player-image.jpg" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderSequence:["asc"]},{targets:2,render:function(e,t,a){return a[5]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:3,render:function(e,t,a){return a[6]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return a[7]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]}]};$("#wishlist-table").gdbTable({tableOptions:e})}function loadPlayerAchievementsSummary(){const e={order:[[2,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[0]+"#achievements"),$(e).attr("data-app-id",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderSequence:["asc","desc"]},{targets:1,render:function(e,t,a){return a[4].toLocaleString()+"<small>/"+a[5].toLocaleString()+"</small>"},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[6]+"%"},orderSequence:["desc","asc"]}]};$("#achievements-summary-table").gdbTable({tableOptions:e})}function loadPlayerAchievementsLatest(){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[0]+"#achievements")},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[4]+'" alt="" data-lazy-alt="'+a[3]+'"></div><div class="name">'+a[1]+": "+a[3]+"<br><small>"+a[5]+"</small></div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[6]?'<span data-livestamp="'+a[6]+'"></span>':"Unknown"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]};$("#achievements-table").gdbTable({tableOptions:e})}function loadPlayerBadges(){const e={order:[[1,"desc"]],createdRow:function(e,t,a){t[0]&&$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[2])},columnDefs:[{targets:0,render:function(e,t,a){let n=a[1];return a[9]&&(n+='<span class="badge badge-primary float-right ml-1">Special</span>'),a[10]&&(n+='<span class="badge badge-warning float-right ml-1">Event</span>'),a[4]&&(n+='<span class="badge badge-success float-right ml-1">Foil</span>'),'<div class="icon-name"><div class="icon"><img data-lazy="'+a[5]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[6].toLocaleString()+" ("+a[8].toLocaleString()+"xp)"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:2,render:function(e,t,a){return a[7].toLocaleString()},orderSequence:["asc","desc"]},{targets:3,render:function(e,t,a){return a[3].toLocaleString()},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc","asc"]}]};$("#badges-table").gdbTable({tableOptions:e,searchFields:[$("#player-badge-search")]})}function loadPlayerCharts(){const e={chart:{type:"line",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!0},plotOptions:{},xAxis:{title:{text:""},type:"datetime"}};$.ajax({type:"GET",url:"/players/"+$playerPage.attr("data-id")+"/history.json",dataType:"json",success:function(t,a,n){null===t&&(t=[]);const r={allowDecimals:!1,title:{text:""},labels:{enabled:!1}};Highcharts.chart("history-chart",$.extend(!0,{},e,{yAxis:[r,r,r,r,r],tooltip:{formatter:function(){return this.y.toLocaleString()+" "+this.series.name.toLowerCase()+" on "+moment(this.key).format("dddd DD MMM YYYY")}},series:[{name:"Level",color:"#28a745",data:t.mean_level,marker:{symbol:"circle"},yAxis:0},{name:"Games",color:"#007bff",data:t.mean_games,marker:{symbol:"circle"},yAxis:1},{name:"Badges",color:"#e83e8c",data:t.mean_badges,marker:{symbol:"circle"},yAxis:2},{name:"Playtime",color:"#ffc107",data:t.mean_playtime,marker:{symbol:"circle"},yAxis:3},{name:"Friends",color:"#343a40",data:t.mean_friends,marker:{symbol:"circle"},yAxis:4}]}));const s={allowDecimals:!1,title:{text:""},reversed:!0,min:1,labels:{enabled:!1}};Highcharts.chart("ranks-chart",$.extend(!0,{},e,{yAxis:[s,s,s,s,s],tooltip:{formatter:function(){return this.series.name+" rank "+this.y.toLocaleString()+" on "+moment(this.key).format("dddd DD MMM YYYY")}},series:[{name:"Level",color:"#28a745",data:t.mean_level_rank,marker:{symbol:"circle"},yAxis:0},{name:"Games",color:"#007bff",data:t.mean_games_rank,marker:{symbol:"circle"},yAxis:1},{name:"Badges",color:"#e83e8c",data:t.mean_badges_rank,marker:{symbol:"circle"},yAxis:2},{name:"Playtime",color:"#ffc107",data:t.mean_playtime_rank,marker:{symbol:"circle"},yAxis:3},{name:"Friends",color:"#343a40",data:t.mean_friends_rank,marker:{symbol:"circle"},yAxis:4}]}))}})}$("#update-button").on("click",function(e){e.preventDefault();const t=$(this);$("i, svg",t).addClass("fa-spin"),$.ajax({url:"/players/"+$playerPage.attr("data-id")+"/update.json",data:{csrf:$(this).attr("data-csrf")},dataType:"json",cache:!1,success:function(e,a,n){toast(e.success,e.toast),$("i",t).removeClass("fa-spin"),t.contents().last()[0].textContent=" In Queue",e.log&&console.log(e.log)}})}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){const t=$(e.target);$(e.relatedTarget);if(!t.attr("loaded"))switch(t.attr("loaded",1),t.attr("href")){case"#charts":loadPlayerCharts();break;case"#games":loadPlayerGames();break;case"#badges":loadPlayerBadges();break;case"#friends":loadPlayerFriends();break;case"#groups":loadPlayerGroups();break;case"#wishlist":loadPlayerWishlist();break;case"#achievements":$('a.nav-link[href="#achievements-summary"]').tab("show");break;case"#achievements-summary":loadPlayerAchievementsSummary();break;case"#achievements-latest":loadPlayerAchievementsLatest()}}),websocketListener("profile",function(e){JSON.parse(e.data).Data.toString()===$playerPage.attr("data-id")&&toast(!0,"Click to refresh","This player has been updated",0,"refresh")})}const $playerMissingPage=$("#player-missing-page");if($playerMissingPage.length>0&&websocketListener("profile",function(e){JSON.parse(e.data).Data.toString()===$playerMissingPage.attr("data-id")&&(toast(!0,"","Player found!"),location.reload())}),$("#players-page").length>0){const e=["AU","CA","FR","GB","NZ","PH","SI","US"],t=$("#country"),a=$("#search");function toggleStateDropDown(){const a=t.val();for(const t of e)t===a?$('.state-dd[data-cc="'+t+'"]').removeClass("d-none"):$('.state-dd[data-cc="'+t+'"]').addClass("d-none")}t.on("change",function(e){toggleStateDropDown()});const n={language:{zeroRecords:function(){return'Players can be searched for using their username or vanity URL. <a href="/players/add?search='+a.val()+'">If a player is missing, add them here</a>.'}},order:[[3,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[13])},columnDefs:[{targets:0,render:function(e,t,a){return a[0]},createdCell:function(e,t,a,n,r){$(e).addClass("font-weight-bold")},orderable:!1},{targets:1,render:function(e,t,a){if(a[11]){const e='<img data-lazy="'+a[11]+'" alt="" data-lazy-alt="'+a[12]+'" class="wide" data-toggle="tooltip" data-placement="left" data-lazy-title="'+a[12]+'">';return'<a href="/players?country='+a[19]+'">'+e+"</a>"}return""},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:2,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[3]+'" alt="" data-lazy-alt="'+a[2]+'"></div><div class="name">'+a[2]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:3,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><div class="'+a[4]+'"></div></div><div class="name min nowrap">'+a[5].toLocaleString()+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderSequence:["desc"]},{targets:4,render:function(e,t,a){return a[7].toLocaleString()},orderSequence:["desc"]},{targets:5,render:function(e,t,a){return a[6]?a[6].toLocaleString():$lockIcon},orderSequence:["desc"]},{targets:6,render:function(e,t,a){return"-"===a[8]?$lockIcon:a[8]},createdCell:function(e,t,a,n,r){if("-"!==a[8]){const t=$(e);t.attr("nowrap","nowrap"),t.attr("data-toggle","tooltip"),t.attr("data-placement","left"),t.attr("title",a[9])}},orderSequence:["desc"]},{targets:7,render:function(e,t,a){return a[15].toLocaleString()},orderSequence:["desc"]},{targets:8,render:function(e,t,a){return a[16].toLocaleString()},orderSequence:["desc"]},{targets:9,render:function(e,t,a){return a[17]>0?'<span data-toggle="tooltip" data-placement="left" title="'+a[18]+'" data-livestamp="'+a[17]+'"></span>':""},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc"]},{targets:10,render:function(e,t,a){return 0===a[10]?$lockIcon:a[10].toLocaleString()},orderSequence:["desc"],visible:!1},{targets:11,render:function(e,t,a){return a[20].toLocaleString()},orderSequence:["desc"],visible:!1},{targets:12,render:function(e,t,a){return a[14]?'<a href="'+a[14]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};let r=[t,a];for(const t of e)r.push($("#"+t+"-state"));const s=$("table.table").gdbTable({tableOptions:n,searchFields:r});function updateColumns(e,t){t||(t="#level"),$('#player-nav a[href="'+t+'"]').tab("show");const a=e.order();let n=[],r=[];switch(t){case"#level":r=[3,4],n=[5,6,7,8,9,10,11],e.order([3,"desc"]);break;case"#games":r=[5,6],n=[3,4,7,8,9,10,11],e.order([5,"desc"]);break;case"#bans":r=[7,8,9],n=[3,4,5,6,7,8,9,10,11],e.order([7,"desc"]);break;case"#profile":r=[10,11],n=[3,4,5,6,7,8,9,10,11],e.order([10,"desc"])}n.forEach(function(t,a,n){e.column(t).visible(!1)}),r.forEach(function(t,a,n){e.column(t).visible(!0)}),JSON.stringify(a)!==JSON.stringify(e.order())&&e.draw();const s=e.table().container();observeLazyImages($(s).find("img[data-lazy]"))}$('#player-nav a[href^="#"]').on("click",function(e){e.preventDefault();const t=$(this).attr("href");window.location.hash=t,updateColumns(s,t)}),setTimeout(function(){updateColumns(s,window.location.hash)},1e3),toggleStateDropDown()}if($("#price-changes-page").length>0){$("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:10});const e=$("#change-low").val(),t=$("#change-high").val(),a=$("#change-slider"),n=noUiSlider.create(a[0],{start:[parseInt(e||-100),parseInt(t||100)],connect:!0,step:1,range:{min:-100,max:100}}),r=$("#price-low").val(),s=$("#price-high").val(),o=$("#price-slider"),i=noUiSlider.create(o[0],{start:[parseInt(r||-100),parseInt(s||100)],connect:!0,step:1,range:{min:0,max:100}});function updateLabels(e){const t=n.get();t[0]===t[1]?$("label#change-label").html("Price Change Percent ("+Math.round(t[0])+"%)"):$("label#change-label").html("Price Change Percent ("+Math.round(t[0])+"% - "+Math.round(t[1])+"%)");const a=i.get();a[0]===a[1]?$("label#price-label").html("Final Price ("+user.userCurrencySymbol+Math.round(a[0])+")"):$("label#price-label").html("Final Price ("+user.userCurrencySymbol+Math.round(a[0])+" - "+user.userCurrencySymbol+Math.round(a[1])+")")}window.updateLabels=updateLabels,$(updateLabels),$typeField=$("#type");const l={order:[[4,"desc"]],createdRow:function(e,t,a){let n;$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[5]),t[9]?(n=Math.min(t[9],100),n+=100,n/=2):n=100,$(e).addClass("col-grad-"+Math.round(n))},columnDefs:[{targets:0,render:function(e,t,a){let n=a[3];return"all"===$typeField.val()&&(a[0]>0?n+=' <span class="badge badge-success float-right">App</span>':a[1]>0&&(n+=' <span class="badge badge-success float-right">Package</span>')),'<div class="icon-name"><div class="icon"><img data-lazy="'+a[4]+'" alt="" data-lazy-alt="'+a[3]+'"></div><div class="name">'+n+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[6]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:2,render:function(e,t,a){return a[7]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:3,render:function(e,t,a){const n="<small>"+a[9]+"%</small>";return 0===a[9]?a[8]+" <small>%</small> ":a[8]+" "+n},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:4,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[10]+'" data-livestamp="'+a[11]+'">'+a[10]+"</span>"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]},c=[$typeField,a,o],d=$("table.table"),u=d.gdbTable({tableOptions:l,searchFields:c});websocketListener("prices",function(e){const t=u.page.info();if(0===t.page){const a=JSON.parse(e.data),n=$typeField.val();a.Data[13]===user.prodCC&&("all"===n||"apps"===n&&a.Data[0]>0||"packages"===n&&a.Data[1]>0)&&addDataTablesRow(l,a.Data,t.length,d)}})}if($("#product-keys-page").length>0){const e={order:[[0,"asc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img src="'+a[2]+'" alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")}},{targets:1,render:function(e,t,a){return a[4]},orderable:!1}]},t=$("#search-table").gdbTable({tableOptions:e,searchFields:[$("#key"),$("#value"),$("input[name=type]")]});$("#search button").on("click",function(e){t.draw()});const a=$("#table-search");$("#apps-table").gdbTable({searchFields:[a]}),$("#packages-table").gdbTable({searchFields:[a]}),$("#apps-table tbody tr").on("click",function(e){$("#key").val($(this).attr("data-key")),$("input[name=type][value=apps]").prop("checked",!0),$('a.nav-link[href="#search"]').tab("show")}),$("#packages-table tbody tr").on("click",function(e){$("#key").val($(this).attr("data-key")),$("input[name=type][value=packages]").prop("checked",!0),$('a.nav-link[href="#search"]').tab("show")})}if($("#queues-page").length>0||$("#player-missing-page").length>0){let e=!0;$(window).on("focus",function(){e=!0}),$(window).on("blur",function(){e=!1});const t={};$("[data-queue]").each(function(e,a){t[$(this).attr("data-queue")]=loadChart($(this).find("div").attr("id"))}),updateCharts();const a=window.setInterval(updateCharts,1e4);function updateCharts(){e&&$.ajax({url:"/queues/queues.json",dataType:"json",cache:!1,success:function(e,a,n){$.each(t,function(t,a){a.series[0].setData(e["GDB_"+t].sum_messages)}),$("#live-badge").addClass("badge-success").removeClass("badge-secondary badge-danger")},error:function(e,t,n){clearTimeout(a),$("#live-badge").addClass("badge-danger").removeClass("badge-secondary badge-success"),toast(!1,"Live functionality has stopped")}})}function loadChart(e){return Highcharts.chart(e,{chart:{animation:!1,backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!1},xAxis:{title:{text:""},labels:{step:1,formatter:function(){return moment(this.value).format("h:mm")}},type:"datetime"},yAxis:[{title:{text:""},allowDecimals:!1,min:0}],plotOptions:{series:{marker:{enabled:!1},animation:!1}},series:[{color:"#28a745",yAxis:0,name:"size",type:"areaspline"}],tooltip:{formatter:function(){return this.y.toLocaleString()+" items in the queue at "+moment(this.key).format("h:mm")+" UTC"}}})}}function recaptchaCallback(e){$("form[data-recaptcha] button[type=submit]").prop("disabled",!1);const t=$("form[data-recaptcha] input[type=text], form input[type=email], form textarea").filter(function(){return""===$(this).val()});t.length>0&&t.get(0).focus()}if($("#sales-page").length>0&&function(e,t){"use strict";const a=e("#clock"),n=a.attr("data-time");a.countdown(n,function(t){e(this).html(t.strftime("%D:%H:%M:%S"))}),e("select.form-control-chosen").chosen({disable_search_threshold:10,allow_single_deselect:!0,rtl:!1,max_selected_options:10});const r=e("#price-slider"),s=noUiSlider.create(r[0],{start:[0,100],connect:!0,step:1,range:{min:0,max:100}}),o=e("#score-slider"),i=noUiSlider.create(o[0],{start:[0,100],connect:!0,step:1,range:{min:0,max:100}}),l=e("#discount-slider"),c=noUiSlider.create(l[0],{start:[0,100],connect:!0,step:1,range:{min:0,max:100}}),d=e("#index-slider"),u=parseInt(d.attr("data-max")),p=noUiSlider.create(d[0],{start:u+1,connect:!0,step:1,range:{min:1,max:u+1}});function g(t){const a=s.get();a[0]===a[1]?e("label#price-label").html("Price ("+user.userCurrencySymbol+Math.round(a[0])+")"):e("label#price-label").html("Price ("+user.userCurrencySymbol+Math.round(a[0])+" to "+user.userCurrencySymbol+Math.round(a[1])+")");const n=i.get();n[0]===n[1]?e("label#score-label").html("Score ("+Math.round(n[0])+"%)"):e("label#score-label").html("Score ("+Math.round(n[0])+"% to "+Math.round(n[1])+"%)");const r=c.get();r[0]===r[1]?e("label#discount-label").html("Discount (-"+Math.round(r[0])+"%)"):e("label#discount-label").html("Discount (-"+Math.round(r[0])+"% - to -"+Math.round(r[1])+"%)"),e("label#index-label").html("Max Per Game ("+Math.trunc(p.get())+")")}window.updateLabels=g,e(g);const m={order:[[3,"desc"]],createdRow:function(t,a,n){e(t).attr("data-link",a[3]),e(t).attr("data-app-id",a[0])},columnDefs:[{targets:0,render:function(e,t,a){let n=a[1];return n=n+" <br /><small>"+a[13]+" / "+a[10]+"</small>",1===a[11]?n+=' <span class="badge badge-success float-right">Equal lowest</span>':2===a[11]&&(n+=' <span class="badge badge-success float-right">Lowest Ever!</span>'),null!=a[15]&&a[15].includes(777)&&(n+=' <span class="badge badge-success float-right">Low Confidence</span>'),'<div class="icon-name"><div class="icon"><img class="tall" data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+n+"</div></div>"},createdCell:function(t,a,n,r,s){e(t).addClass("img")}},{targets:1,render:function(e,t,a){return a[4]?a[4]:"-"},orderSequence:["asc","desc"]},{targets:2,render:function(e,t,a){return a[5]+"%"},orderSequence:["asc"]},{targets:3,render:function(e,t,a){return a[6]},orderSequence:["desc"]},{targets:4,render:function(e,t,a){let n='<span data-toggle="tooltip" data-placement="left" title="'+a[7]+'" data-livestamp="'+a[7]+'"></span>';return a[11]&&(n+="*"),n},createdCell:function(t,a,n,r,s){e(t).attr("nowrap","nowrap")},orderSequence:["asc"]},{targets:5,render:function(e,t,a){return a[9].startsWith("1970-01-01")?a[14]:'<span data-toggle="tooltip" data-placement="left" title="'+a[9]+'" data-livestamp="'+a[9]+'"></span>'},createdCell:function(t,a,n,r,s){e(t).attr("nowrap","nowrap")},orderSequence:["desc","asc"]},{targets:6,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},f=(new URL(window.location).searchParams,e("#platforms")),h=e("#app-type"),b=[e("#search"),e("#tags-in"),e("#tags-out"),e("#categories"),e("#sale-type"),h,f,r,o,l,d];e("table.table").gdbTable({tableOptions:m,searchFields:b})}(jQuery,document),$("#settings-page").length>0){function loadEvents(){const e={order:[[0,"desc"]],columnDefs:[{targets:0,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[1]+'" data-livestamp="'+a[0]+'">'+a[1]+"</span>"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:1,render:function(e,t,a){return'<i class="fas '+a[7]+'"></i> '+a[2]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:2,render:function(e,t,a){return a[3]===a[6]?'<span class="font-weight-bold" data-toggle="tooltip" data-placement="left" title="Your current IP">'+a[3]+"</span>":a[3]},orderable:!1},{targets:3,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[4]+'">'+a[5]+"</span>"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]};$("#events table.table").gdbTable({tableOptions:e})}function loadDonations(){const e={order:[[0,"desc"]],columnDefs:[{targets:0,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[1]+'" data-livestamp="'+a[0]+'">'+a[1]+"</span>"},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:1,render:function(e,t,a){return'<i class="fas '+a[7]+'"></i> '+a[2]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1}]};$("#donations table.table").gdbTable({tableOptions:e})}$("input:password").pwstrength({ui:{showPopover:!1,showErrors:!1},common:{usernameField:"#email"}}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){const t=$(e.target);$(e.relatedTarget);if(!t.attr("loaded"))switch(t.attr("loaded",1),t.attr("href")){case"#events":loadEvents();break;case"#donations":loadDonations()}})}if($("#genres-page").length>0||$("#developers-page").length>0||$("#publishers-page").length>0||$("#tags-page").length>0||$("#categories-page").length>0){const e=[$("#search")];$("table.table").gdbTable({searchFields:e})}$("#stats-page").length>0&&function(e,t){"use strict";const a={chart:{type:"column",backgroundColor:"rgba(0,0,0,0)"},title:{text:""},subtitle:{text:""},credits:{enabled:!1},legend:{enabled:!1},xAxis:{title:{text:""},type:"category"},yAxis:{allowDecimals:!1,title:{text:""}},series:[{color:"#28a745"}],plotOptions:{series:{pointPadding:0,groupPadding:0}}};e.ajax({type:"GET",url:"/stats/client-players.json",dataType:"json",success:function(t,n,r){null===t&&(t=[]),Highcharts.chart("client-players",e.extend(!0,{},a,{chart:{type:"area"},xAxis:{type:"datetime"},legend:{enabled:!0},tooltip:{formatter:function(){const e=moment(this.key).format("dddd DD MMM YYYY @ HH:mm");return"Ingame"===this.series.name?this.y.toLocaleString()+" people in a game on "+e:this.y.toLocaleString()+" people online on "+e}},series:[{name:"In Game",marker:{symbol:"circle"},data:t.max_player_count},{name:"Online",marker:{symbol:"circle"},color:"#007bff",data:t.max_player_online,type:"line"}]}))}}),e.ajax({type:"GET",url:"/stats/client-players2.json",dataType:"json",success:function(t,n,r){null===t&&(t=[]),Highcharts.chart("client-players2",e.extend(!0,{},a,{chart:{type:"area"},xAxis:{type:"datetime"},legend:{enabled:!0},tooltip:{formatter:function(){const e=moment(this.key).format("dddd DD MMM YYYY @ HH:mm");return"In Game"===this.series.name?this.y.toLocaleString()+" people in a game on "+e:this.y.toLocaleString()+" people online on "+e}},series:[{name:"In Game",marker:{symbol:"circle"},data:t.max_player_count},{name:"Online",marker:{symbol:"circle"},color:"#007bff",data:t.max_player_online,type:"line"}]}))}}),e.ajax({type:"GET",url:"/stats/app-scores.json",dataType:"json",success:function(n,r,s){null===n&&(n=[]),Highcharts.chart("scores",e.extend(!0,{},a,{xAxis:{tickInterval:5},tooltip:{formatter:function(){return this.y.toLocaleString()+" apps have "+this.x+"/100"}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){t.location.href="/games?score="+this.x+"&score="+(this.x+1)}}}}},series:[{data:n}]}))}}),e.ajax({type:"GET",url:"/stats/player-levels.json",dataType:"json",success:function(t,n,r){let s=[],o=[];t.forEach(function(e,a,n){s.push(t[a].id),o.push(e.count)}),Highcharts.chart("player-levels",e.extend(!0,{},a,{xAxis:{tickInterval:5,categories:s},yAxis:{type:"logarithmic"},tooltip:{formatter:function(){return this.y.toLocaleString()+" players are level "+this.x+"-"+(this.x+9)}},series:[{data:o}]}))}}),e.ajax({type:"GET",url:"/stats/release-dates.json",dataType:"json",success:function(t,n,r){null===t&&(t=[]),Highcharts.chart("release-dates",e.extend(!0,{},a,{chart:{type:"column"},xAxis:{type:"datetime"},tooltip:{formatter:function(){return this.y.toLocaleString()+" apps released on "+moment(this.key).format("dddd DD MMM YYYY")}},series:[{data:t}],plotOptions:{series:{pointWidth:2},area:{lineWidth:1,states:{hover:{lineWidth:1}}}}}))}}),e.ajax({type:"GET",url:"/stats/app-types.json",dataType:"json",cache:!0,success:function(t,a,n){const r=e("#app-types tbody");r.empty(),r.json2html(t.rows,{"<>":"tr","data-link":"/games?types=${type}",html:[{"<>":"td",html:"${typef}"},{"<>":"td",html:"${countf}"},{"<>":"td",html:"${totalf}"}]},{prepend:!1}),e("#total-price").text(t.total),e("#app-types").gdbTable()}})}(jQuery,window);const $steamApiPage=$("#steam-api-page");if($steamApiPage.length>0){$("#sidebar").stickySidebar({topSpacing:0,bottomSpacing:16}),$(".endpoint").on("mouseenter",function(){$(this).trigger("select")});const e=$steamApiPage.find("form#key-form");function setMethodSettings(){const e=$("#key-form input[name=key]").val(),t=$("#key-form select[name=format]").val();$("div.interface input[name=key]").val(e),$("div.interface input[name=format]").val(t)}e.on("submit",function(t){t.preventDefault(),localStorage.setItem("gamedb-settings",e.serialize()),setMethodSettings(),toast(!0,"Settings Saved")}),e.deserialize(localStorage.getItem("gamedb-settings")),setMethodSettings()}if($("#wishlists-page").length>0){const e={order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[4].toLocaleString()},orderSequence:["desc"]},{targets:2,render:function(e,t,a){return a[5].toLocaleString()},orderSequence:["asc","desc"]},{targets:3,render:function(e,t,a){return a[6]},orderSequence:["desc","asc"]},{targets:4,render:function(e,t,a){return a[10]},orderSequence:["desc","asc"]},{targets:5,render:function(e,t,a){return a[9]},orderSequence:["asc","desc"]},{targets:6,render:function(e,t,a){return a[7]?'<a href="'+a[7]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]};$("#apps table.table").gdbTable({tableOptions:e,searchFields:[$("#search")]});const t={pageLength:1e3,order:[[1,"desc"]],createdRow:function(e,t,a){$(e).attr("data-link",t[2])},columnDefs:[{targets:0,render:function(e,t,a){return'<i class="fas fa-tag"></i> '+a[1]}},{targets:1,render:function(e,t,a){return a[3].toLocaleString()}}]};$("#tags table.table").gdbTable({tableOptions:t})}if($("#upcoming-page").length>0){$("form").on("submit",function(e){e.preventDefault(),dt.search($("#search").val()).draw()});const e={order:[[3,"asc"]],createdRow:function(e,t,a){$(e).attr("data-app-id",t[0]),$(e).attr("data-link",t[3])},drawCallback:function(e){const t=this.api();if(t.order()[0]&&3===t.order()[0][0]){const e=t.rows({page:"current"}).nodes();let a=null;t.rows().every(function(t,n,r){let s=this.data()[6];a!==s&&($(e).eq(t).before('<tr class="table-success"><td colspan="6">'+s+"</td></tr>"),a=s)})}},columnDefs:[{targets:0,render:function(e,t,a){return'<div class="icon-name"><div class="icon"><img data-lazy="'+a[2]+'" alt="" data-lazy-alt="'+a[1]+'"></div><div class="name">'+a[1]+"</div></div>"},createdCell:function(e,t,a,n,r){$(e).addClass("img")},orderable:!1},{targets:1,render:function(e,t,a){return a[7]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["desc"]},{targets:2,render:function(e,t,a){return a[4]},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderable:!1},{targets:3,render:function(e,t,a){return'<span data-toggle="tooltip" data-placement="left" title="'+a[10]+'" data-livestamp="'+a[9]+'"></span>'},createdCell:function(e,t,a,n,r){$(e).attr("nowrap","nowrap")},orderSequence:["asc","desc"]},{targets:4,render:function(e,t,a){return a[8]?'<a href="'+a[8]+'" target="_blank" rel="noopener"><i class="fas fa-link"></i></a>':""},orderable:!1}]},t=[$("#search")];$("table.table").gdbTable({tableOptions:e,searchFields:t})}